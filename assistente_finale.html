<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ginevra AI - ClubForWeb</title>
    <style>
        body { 
            margin: 0; padding: 0; height: 100vh; 
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; 
            background: radial-gradient(circle at center, #002d25, #000000); 
            font-family: 'Segoe UI', sans-serif; color: white;
            overflow: hidden;
        }

        .container { text-align: center; width: 100%; max-width: 450px; }

        /* Titolo richiesto */
        .status-header {
            font-size: 1.1em;
            color: #00ffcc;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 300;
            margin-bottom: 30px;
        }

        /* Avatar circolare sistemato come da foto ok */
        .avatar-container {
            position: relative;
            width: 240px; height: 240px;
            margin: 0 auto;
        }

        .avatar-circle {
            width: 100%; height: 100%;
            border-radius: 50%;
            border: 4px solid #00ffcc;
            background-image: url('ginevra_viso.png'); 
            background-size: 110%; /* Zoom corretto */
            background-position: center 22%; /* Centratura viso ok */
            position: relative;
            z-index: 2;
            box-shadow: 0 0 40px rgba(0, 255, 204, 0.2);
        }

        .pulse {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 50%;
            background: rgba(0, 255, 204, 0.4);
            z-index: 1;
            display: none;
            animation: pulse-animation 2s infinite;
        }

        @keyframes pulse-animation {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        .name-title {
            font-size: 2.8em;
            font-weight: bold;
            margin: 20px 0 40px 0;
        }

        /* Tasti chiamata stile SinergIA */
        .controls {
            display: flex;
            justify-content: center;
            gap: 50px;
        }

        .btn {
            width: 75px; height: 75px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.2s ease;
        }

        .btn-start { background-color: #28a745; box-shadow: 0 0 20px rgba(40, 167, 69, 0.4); }
        .btn-end { background-color: #dc3545; box-shadow: 0 0 20px rgba(220, 53, 69, 0.4); }

        svg { fill: white; width: 35px; height: 35px; }

        /* Widget ElevenLabs - reso visibile ma piccolo per forzare i permessi */
        elevenlabs-convai { 
            position: fixed;
            bottom: 20px;
            right: 20px;
            opacity: 0.01; /* Quasi invisibile ma attivo per il browser */
            z-index: 10;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="status-header" id="status-label">ASSISTENTE VIRTUALE ClubForWeb</div>

        <div class="avatar-container">
            <div class="pulse" id="pulse-effect"></div>
            <div class="avatar-circle"></div>
        </div>

        <div class="name-title">Ginevra</div>

        <div class="controls">
            <button class="btn btn-start" onclick="startCall()">
                <svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
            </button>
            <button class="btn btn-end" onclick="stopCall()">
                <svg viewBox="0 0 24 24"><path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9V9.72C15.15 9.25 13.6 9 12 9z"/></svg>
            </button>
        </div>

        <elevenlabs-convai agent-id="agent_1201khvbjrfxehcsyy0ak12m9wns"></elevenlabs-convai>
    </div>

    <script src="https://elevenlabs.io/convai-widget/index.js" async type="text/javascript"></script>

    <script>
        function startCall() {
            const widget = document.querySelector('elevenlabs-convai');
            const label = document.getElementById('status-label');
            const pulse = document.getElementById('pulse-effect');

            try {
                // Tenta di avviare cliccando sul pulsante del widget shadow DOM
                const startBtn = widget.shadowRoot.querySelector('button');
                startBtn.click();
                
                label.innerText = "IN COLLEGAMENTO...";
                pulse.style.display = 'block';
            } catch (e) {
                console.error("Widget non pronto");
            }
        }

        function stopCall() {
            location.reload();
        }
    </script>
</body>
</html>